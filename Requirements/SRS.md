# Требования к проекту

## 1 Введение

### 1.1 Контекст проекта
Проект Gnotebin представляет собой веб-сервис, вдохновленный платформой Pastebin, предназначенный для быстрой загрузки и обмена текстовыми заметками и файлами. Сервис ориентирован на разработчиков, студентов и пользователей, которым требуется простой инструмент для хранения и распространения кода, документов или медиафайлов без необходимости в сложной регистрации. Gnotebin позволяет загружать текст с подсветкой синтаксиса (для языков программирования), а также файлы различных типов: изображения отображаются непосредственно в браузере, а другие файлы доступны для скачивания. Административная панель доступна после аутентификации и позволяет управлять загруженными файлами.

### 1.2 Границы проекта
**Что продукт будет делать:**
- Загрузка текстовых заметок с автоматической подсветкой синтаксиса (поддержка популярных языков, таких как Python, JavaScript, HTML и т.д.).
- Загрузка файлов (до 10 МБ на файл): изображения (JPEG, PNG, GIF) отображаются в галерее; другие файлы (PDF, ZIP, TXT и т.д.) доступны для скачивания.
- Генерация уникальных URL для каждой заметки или файла.
- Административная панель для модерации: просмотр, редактирование, удаление контента.
- Хранение файлов в облачном хранилище (S3-совместимое), метаданные и пины в PostgreSQL БД.

**Чего продукт не будет делать:**
- Не поддерживает пользовательские аккаунты (кроме админки).
- Не предоставляет редактирование загруженного контента после публикации (только админы могут редактировать).
- Не интегрируется с внешними сервисами аутентификации (например, OAuth).
- Не поддерживает реальное время (live collaboration) или чат-функции.

## 2 Требования пользователя

### 2.1 Программные интерфейсы
Gnotebin взаимодействует со следующими внешними системами, библиотеками и сервисами:

- **Базы данных:** PostgreSQL (БД для хранения метаданных заметок, пинов и пользователей админки).
- **Хранение файлов:** AWS S3 (через boto3 и django-storages) для облачного хранения файлов; локальное fallback-хранение не предусмотрено.
- **Веб-фреймворк:** Django для backend-логики, роутинга и админ-панели.
- **Зависимости Python:** 
  - boto3 (клиент для AWS S3),
  - django-storages (интеграция Django с S3),
  - psycopg2-binary (адаптер для PostgreSQL),
  - typing-extensions(расширения типизации).
- **Внешние сервисы:** AWS (для S3), без прямого взаимодействия с другими API (например, без GitHub или Slack интеграций).

### 2.2 Интерфейс пользователя
Интерфейс пользователя реализован как веб-приложение с минималистичным дизайном (HTML/CSS с Bootstrap для responsivity). Взаимодействие описано в таблице "Действие пользователя — Реакция системы".

| Действие пользователя | Реакция системы |
|------------------------|-----------------|
| Переход на главную страницу (/) | Отображение формы загрузки: поле для текста (с выбором языка для подсветки), кнопка "Выбрать файл", опции срока истечения и публичности. Ниже — список закрепленных (пин) заметок/файлов. |
| Ввод текста и выбор языка (например, Python) | Автоматическая подсветка синтаксиса в preview-окне (используя Prism.js или аналог). |
| Загрузка файла (изображение) | Preview изображения в форме; после отправки — отображение полного изображения по URL. |
| Загрузка файла (не изображение, например, PDF) | Иконка файла с кнопкой "Скачать"; после отправки — прямая ссылка на скачивание. |
| Отправка формы | Генерация уникального URL (например, /note/abc123); редирект на страницу просмотра с сообщением "Сохранено!". |
| Просмотр заметки/файла по URL | Отображение контента: текст с подсветкой, изображение или ссылка на скачивание. Кнопка "Копировать URL". Если срок истек — 404 ошибка. |
| Вход в админку (/admin/) | Форма логина; после входа — Django Admin панель с моделями Note/File/Pin для CRUD-операций (создание, чтение, обновление, удаление). |
| Закрепление (пин) в админке | Добавление флага "pinned" к заметке/файлу; автоматическое отображение в топе главной страницы. |

Мокапы интерфейса (описательные, без изображений):
- Главная: Вертикальная форма по центру, снизу галерея пинов (3-5 карточек с preview).
- Просмотр: Полноэкранный контент с боковой панелью (язык, дата, кнопки share/delete для админов).

### 2.3 Характеристики пользователей
**Группы пользователей:**
1. **Обычные пользователи (80% трафика):** Разработчики, студенты, технические специалисты. Уровень образования: высшее или среднее специальное; опыт: базовый (знание веб-браузера, загрузка файлов); техническая грамотность: средняя-высокая (понимают URL, копирование ссылок).
2. **Администраторы (1-5%):** Системные администраторы или модераторы. Уровень образования: высшее техническое; опыт: продвинутый (Django Admin, SQL); техническая грамотность: высокая (управление БД, модерация контента).

Пользователи ожидают простоты и скорости; нет поддержки для неграмотных в IT пользователей.

### 2.4 Предположения и зависимости
- **Предположения:** Пользователи имеют доступ к интернету и современным браузерам (Chrome, Firefox); AWS S3 доступен без простоев; локальная PostgreSQL развернута на сервере с >=4GB RAM.
- **Зависимости:** 
  - Стабильность AWS S3 (риск: простои влияют на загрузку/скачивание).
  - Версии библиотек фиксированы; обновления Django могут сломать совместимость.
  - БД: требует ручной настройки (pgAdmin или CLI); миграции Django обязательны.
  - Факторы влияния: Изменения в AWS API могут потребовать обновления boto3; рост трафика (>1000 загрузок/день) потребует scaling (не в границах проекта).

## 3 Системные требования

### 3.1 Функциональные требования
1. **FR-01:** Система должна позволять анонимную загрузку текстовых заметок.
2. **FR-02:** Система должна поддерживать загрузку файлов  с валидацией типа: изображения (JPEG/PNG/GIF) отображаются inline; другие типы — ссылка на скачивание.
3. **FR-03:** Каждая заметка/файл должна генерировать уникальный публичный URL.
4. **FR-04:** Административная панель (Django Admin) должна предоставлять CRUD-операции для для файлов и пинов.
5. **FR-06:** Хранение: Файлы — в AWS S3 (через django-storages); метаданные и пины — в PostgreSQL (таблицы pins, files).
6. **FR-07:** Система должна обрабатывать ошибки: 404 для истекших ссылок.
7. **FR-08:** Поддержка HTTPS для всех URL (конфигурация в Django settings).

### 3.2 Нефункциональные требования

#### 3.2.1 Атрибуты качества
| Атрибут качества | Почему важен | Как измеряется |
|-------------------|--------------|---------------|
| **Надёжность** | Сервис должен работать без сбоев для ежедневных загрузок; простои AWS или БД недопустимы для пользователей, ожидающих быстрого доступа. | Uptime >= 99.5% (мониторинг через Django logs + внешний сервис как UptimeRobot); MTBF (среднее время между сбоями) > 100 часов. |
| **Безопасность** | Защита от вредоносного контента (SQL-инъекции, XSS); админка с сильной аутентификацией. | Соответствие OWASP Top 10; метрика: 0 уязвимостей в penetration testing. |
| **Производительность** | Быстрая загрузка ( < 2 сек) и скачивание; подсветка синтаксиса не замедляет рендеринг. | Время отклика < 500ms (Apache Benchmark); throughput > 100 запросов/сек на сервере с 2 CPU. |
| **Масштабируемость** | Поддержка роста до 10k пользователей/месяц без перестройки; S3 масштабируется автоматически. | Горизонтальное scaling Django (Gunicorn + Nginx); тест нагрузки (Locust) на 500 concurrent users. |
| **Удобство использования** | Минималистичный UI; responsivity для мобильных. | Usability score > 80% в SUS (System Usability Scale) опросах; A/B-тестирование форм. |
| **Поддерживаемость** | Код модульный; миграции БД автоматизированы. | Code coverage > 80% (pytest); время на фикс бага < 4 часов.
